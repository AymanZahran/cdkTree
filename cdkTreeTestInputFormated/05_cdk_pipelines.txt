id   :  App
path :  
lib  :  aws-cdk-lib.App
    id   :  Tree
    path :  Tree
    lib  :  constructs.Construct
    id   :  cdk-pipelines
    path :  cdk-pipelines
    lib  :  aws-cdk-lib.Stack
        id   :  AymanRepoCDK
        path :  cdk-pipelines/AymanRepoCDK
        lib  :  aws-cdk-lib.aws_codecommit.Repository
            id   :  Resource
            path :  cdk-pipelines/AymanRepoCDK/Resource
            lib  :  aws-cdk-lib.aws_codecommit.CfnRepository
            attributes  :  
                aws:cdk:cloudformation:props:
                  repositoryName: AymanRepoCDK
                aws:cdk:cloudformation:type: AWS::CodeCommit::Repository
            id   :  cdkpipelinesAymanPipelineCDKPipeline49973BF2EventRule
            path :  cdk-pipelines/AymanRepoCDK/cdkpipelinesAymanPipelineCDKPipeline49973BF2EventRule
            lib  :  aws-cdk-lib.aws_events.Rule
                id   :  Resource
                path :  cdk-pipelines/AymanRepoCDK/cdkpipelinesAymanPipelineCDKPipeline49973BF2EventRule/Resource
                lib  :  aws-cdk-lib.aws_events.CfnRule
                attributes  :  
                    aws:cdk:cloudformation:props:
                      eventPattern:
                        detail:
                          event:
                          - referenceCreated
                          - referenceUpdated
                          referenceName:
                          - master
                        detail-type:
                        - CodeCommit Repository State Change
                        resources:
                        - Fn::GetAtt:
                          - AymanRepoCDK8F638138
                          - Arn
                        source:
                        - aws.codecommit
                      state: ENABLED
                      targets:
                      - arn:
                          Fn::Join:
                          - ''
                          - - 'arn:'
                            - Ref: AWS::Partition
                            - ':codepipeline:'
                            - Ref: AWS::Region
                            - ':'
                            - Ref: AWS::AccountId
                            - ':'
                            - Ref: AymanPipelineCDKPipeline0DE64F82
                        id: Target0
                        roleArn:
                          Fn::GetAtt:
                          - AymanPipelineCDKPipelineEventsRole3AB2E8A7
                          - Arn
                    aws:cdk:cloudformation:type: AWS::Events::Rule
        id   :  AymanPipelineCDK
        path :  cdk-pipelines/AymanPipelineCDK
        lib  :  aws-cdk-lib.pipelines.CodePipeline
            id   :  Pipeline
            path :  cdk-pipelines/AymanPipelineCDK/Pipeline
            lib  :  aws-cdk-lib.aws_codepipeline.Pipeline
                id   :  ArtifactsBucket
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ArtifactsBucket
                lib  :  aws-cdk-lib.aws_s3.Bucket
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ArtifactsBucket/Resource
                    lib  :  aws-cdk-lib.aws_s3.CfnBucket
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          bucketEncryption:
                            serverSideEncryptionConfiguration:
                            - serverSideEncryptionByDefault:
                                sseAlgorithm: aws:kms
                          publicAccessBlockConfiguration:
                            blockPublicAcls: true
                            blockPublicPolicy: true
                            ignorePublicAcls: true
                            restrictPublicBuckets: true
                        aws:cdk:cloudformation:type: AWS::S3::Bucket
                    id   :  Policy
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ArtifactsBucket/Policy
                    lib  :  aws-cdk-lib.aws_s3.BucketPolicy
                        id   :  Resource
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ArtifactsBucket/Policy/Resource
                        lib  :  aws-cdk-lib.aws_s3.CfnBucketPolicy
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              bucket:
                                Ref: AymanPipelineCDKPipelineArtifactsBucket33E4858D
                              policyDocument:
                                Statement:
                                - Action: s3:*
                                  Condition:
                                    Bool:
                                      aws:SecureTransport: 'false'
                                  Effect: Deny
                                  Principal:
                                    AWS: '*'
                                  Resource:
                                  - Fn::GetAtt:
                                    - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                    - Arn
                                  - Fn::Join:
                                    - ''
                                    - - Fn::GetAtt:
                                        - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                        - Arn
                                      - /*
                                - Action:
                                  - s3:GetObject*
                                  - s3:GetBucket*
                                  - s3:List*
                                  Effect: Allow
                                  Principal:
                                    AWS:
                                      Fn::Join:
                                      - ''
                                      - - 'arn:'
                                        - Ref: AWS::Partition
                                        - ':iam::'
                                        - Ref: AWS::AccountId
                                        - :role/cdk-hnb659fds-deploy-role-
                                        - Ref: AWS::AccountId
                                        - '-'
                                        - Ref: AWS::Region
                                  Resource:
                                  - Fn::GetAtt:
                                    - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                    - Arn
                                  - Fn::Join:
                                    - ''
                                    - - Fn::GetAtt:
                                        - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                        - Arn
                                      - /*
                                Version: '2012-10-17'
                            aws:cdk:cloudformation:type: AWS::S3::BucketPolicy
                id   :  Role
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Role
                lib  :  aws-cdk-lib.aws_iam.Role
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Role/Resource
                    lib  :  aws-cdk-lib.aws_iam.CfnRole
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          assumeRolePolicyDocument:
                            Statement:
                            - Action: sts:AssumeRole
                              Effect: Allow
                              Principal:
                                Service: codepipeline.amazonaws.com
                            Version: '2012-10-17'
                        aws:cdk:cloudformation:type: AWS::IAM::Role
                    id   :  DefaultPolicy
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Role/DefaultPolicy
                    lib  :  aws-cdk-lib.aws_iam.Policy
                        id   :  Resource
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Role/DefaultPolicy/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              policyDocument:
                                Statement:
                                - Action:
                                  - s3:GetObject*
                                  - s3:GetBucket*
                                  - s3:List*
                                  - s3:DeleteObject*
                                  - s3:PutObject
                                  - s3:PutObjectLegalHold
                                  - s3:PutObjectRetention
                                  - s3:PutObjectTagging
                                  - s3:PutObjectVersionTagging
                                  - s3:Abort*
                                  Effect: Allow
                                  Resource:
                                  - Fn::GetAtt:
                                    - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                    - Arn
                                  - Fn::Join:
                                    - ''
                                    - - Fn::GetAtt:
                                        - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                        - Arn
                                      - /*
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                    Fn::GetAtt:
                                    - AymanPipelineCDKPipelineSourceCodeCommitCodePipelineActionRole71531ECD
                                    - Arn
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                    Fn::GetAtt:
                                    - AymanPipelineCDKPipelineBuildSynthCodePipelineActionRoleA0ED16A3
                                    - Arn
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                    Fn::GetAtt:
                                    - AymanPipelineCDKPipelineUpdatePipelineSelfMutateCodePipelineActionRoleFC0A9D33
                                    - Arn
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                    Fn::GetAtt:
                                    - AymanPipelineCDKPipelineAssetsFileAsset1CodePipelineActionRole614D4BF0
                                    - Arn
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':iam::'
                                      - Ref: AWS::AccountId
                                      - :role/cdk-hnb659fds-deploy-role-
                                      - Ref: AWS::AccountId
                                      - '-'
                                      - Ref: AWS::Region
                                Version: '2012-10-17'
                              policyName: AymanPipelineCDKPipelineRoleDefaultPolicyAD2FE96B
                              roles:
                              - Ref: AymanPipelineCDKPipelineRole9EA7F64F
                            aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  Resource
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Resource
                lib  :  aws-cdk-lib.aws_codepipeline.CfnPipeline
                attributes  :  
                    aws:cdk:cloudformation:props:
                      artifactStore:
                        location:
                          Ref: AymanPipelineCDKPipelineArtifactsBucket33E4858D
                        type: S3
                      restartExecutionOnUpdate: true
                      roleArn:
                        Fn::GetAtt:
                        - AymanPipelineCDKPipelineRole9EA7F64F
                        - Arn
                      stages:
                      - actions:
                        - actionTypeId:
                            category: Source
                            owner: AWS
                            provider: CodeCommit
                            version: '1'
                          configuration:
                            BranchName: master
                            PollForSourceChanges: false
                            RepositoryName:
                              Fn::GetAtt:
                              - AymanRepoCDK8F638138
                              - Name
                          name:
                            Fn::GetAtt:
                            - AymanRepoCDK8F638138
                            - Name
                          outputArtifacts:
                          - name: c87ff5e8cdea60fca86aea74918ad5068f87bfd0bf_Source
                          roleArn:
                            Fn::GetAtt:
                            - AymanPipelineCDKPipelineSourceCodeCommitCodePipelineActionRole71531ECD
                            - Arn
                          runOrder: 1
                        name: Source
                      - actions:
                        - actionTypeId:
                            category: Build
                            owner: AWS
                            provider: CodeBuild
                            version: '1'
                          configuration:
                            EnvironmentVariables: '[{"name":"_PROJECT_CONFIG_HASH","type":"PLAINTEXT","value":"a5cd9a51db416d25b3f3e8d261924027409c0982262bf483f18dc62e125f9436"}]'
                            ProjectName:
                              Ref: AymanPipelineCDKPipelineBuildSynthCdkBuildProject76B2FEE9
                          inputArtifacts:
                          - name: c87ff5e8cdea60fca86aea74918ad5068f87bfd0bf_Source
                          name: Synth
                          outputArtifacts:
                          - name: Synth_Output
                          roleArn:
                            Fn::GetAtt:
                            - AymanPipelineCDKPipelineBuildSynthCodePipelineActionRoleA0ED16A3
                            - Arn
                          runOrder: 1
                        name: Build
                      - actions:
                        - actionTypeId:
                            category: Build
                            owner: AWS
                            provider: CodeBuild
                            version: '1'
                          configuration:
                            EnvironmentVariables: '[{"name":"_PROJECT_CONFIG_HASH","type":"PLAINTEXT","value":"ef1cedd89725be4d3dfe96d459cd4fe663c2c351aa2d31ef2fd6c57599f54070"}]'
                            ProjectName:
                              Ref: AymanPipelineCDKUpdatePipelineSelfMutationE9EEF70F
                          inputArtifacts:
                          - name: Synth_Output
                          name: SelfMutate
                          roleArn:
                            Fn::GetAtt:
                            - AymanPipelineCDKPipelineUpdatePipelineSelfMutateCodePipelineActionRoleFC0A9D33
                            - Arn
                          runOrder: 1
                        name: UpdatePipeline
                      - actions:
                        - actionTypeId:
                            category: Build
                            owner: AWS
                            provider: CodeBuild
                            version: '1'
                          configuration:
                            ProjectName:
                              Ref: AymanPipelineCDKAssetsFileAsset1CA9ECF9C
                          inputArtifacts:
                          - name: Synth_Output
                          name: FileAsset1
                          roleArn:
                            Fn::GetAtt:
                            - AymanPipelineCDKPipelineAssetsFileAsset1CodePipelineActionRole614D4BF0
                            - Arn
                          runOrder: 1
                        name: Assets
                      - actions:
                        - actionTypeId:
                            category: Deploy
                            owner: AWS
                            provider: CloudFormation
                            version: '1'
                          configuration:
                            ActionMode: CHANGE_SET_REPLACE
                            Capabilities: CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND
                            ChangeSetName: PipelineChange
                            RoleArn:
                              Fn::Join:
                              - ''
                              - - 'arn:'
                                - Ref: AWS::Partition
                                - ':iam::'
                                - Ref: AWS::AccountId
                                - :role/cdk-hnb659fds-cfn-exec-role-
                                - Ref: AWS::AccountId
                                - '-'
                                - Ref: AWS::Region
                            StackName: Deploy-ServerlessApp
                            TemplatePath: Synth_Output::assembly-cdk-pipelines-Deploy/cdkpipelinesDeployServerlessApp594FF085.template.json
                          inputArtifacts:
                          - name: Synth_Output
                          name: Prepare
                          roleArn:
                            Fn::Join:
                            - ''
                            - - 'arn:'
                              - Ref: AWS::Partition
                              - ':iam::'
                              - Ref: AWS::AccountId
                              - :role/cdk-hnb659fds-deploy-role-
                              - Ref: AWS::AccountId
                              - '-'
                              - Ref: AWS::Region
                          runOrder: 1
                        - actionTypeId:
                            category: Deploy
                            owner: AWS
                            provider: CloudFormation
                            version: '1'
                          configuration:
                            ActionMode: CHANGE_SET_EXECUTE
                            ChangeSetName: PipelineChange
                            StackName: Deploy-ServerlessApp
                          name: Deploy
                          roleArn:
                            Fn::Join:
                            - ''
                            - - 'arn:'
                              - Ref: AWS::Partition
                              - ':iam::'
                              - Ref: AWS::AccountId
                              - :role/cdk-hnb659fds-deploy-role-
                              - Ref: AWS::AccountId
                              - '-'
                              - Ref: AWS::Region
                          runOrder: 2
                        name: Deploy
                    aws:cdk:cloudformation:type: AWS::CodePipeline::Pipeline
                id   :  Source
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source
                lib  :  constructs.Construct
                    id   :  CodeCommit
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source/CodeCommit
                    lib  :  constructs.Construct
                        id   :  CodePipelineActionRole
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source/CodeCommit/CodePipelineActionRole
                        lib  :  aws-cdk-lib.aws_iam.Role
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source/CodeCommit/CodePipelineActionRole/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnRole
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  assumeRolePolicyDocument:
                                    Statement:
                                    - Action: sts:AssumeRole
                                      Effect: Allow
                                      Principal:
                                        AWS:
                                          Fn::Join:
                                          - ''
                                          - - 'arn:'
                                            - Ref: AWS::Partition
                                            - ':iam::'
                                            - Ref: AWS::AccountId
                                            - :root
                                    Version: '2012-10-17'
                                aws:cdk:cloudformation:type: AWS::IAM::Role
                            id   :  DefaultPolicy
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source/CodeCommit/CodePipelineActionRole/DefaultPolicy
                            lib  :  aws-cdk-lib.aws_iam.Policy
                                id   :  Resource
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Source/CodeCommit/CodePipelineActionRole/DefaultPolicy/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      policyDocument:
                                        Statement:
                                        - Action:
                                          - s3:GetObject*
                                          - s3:GetBucket*
                                          - s3:List*
                                          - s3:DeleteObject*
                                          - s3:PutObject
                                          - s3:PutObjectLegalHold
                                          - s3:PutObjectRetention
                                          - s3:PutObjectTagging
                                          - s3:PutObjectVersionTagging
                                          - s3:Abort*
                                          Effect: Allow
                                          Resource:
                                          - Fn::GetAtt:
                                            - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                            - Arn
                                          - Fn::Join:
                                            - ''
                                            - - Fn::GetAtt:
                                                - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                                - Arn
                                              - /*
                                        - Action:
                                          - codecommit:GetBranch
                                          - codecommit:GetCommit
                                          - codecommit:UploadArchive
                                          - codecommit:GetUploadArchiveStatus
                                          - codecommit:CancelUploadArchive
                                          Effect: Allow
                                          Resource:
                                            Fn::GetAtt:
                                            - AymanRepoCDK8F638138
                                            - Arn
                                        Version: '2012-10-17'
                                      policyName: AymanPipelineCDKPipelineSourceCodeCommitCodePipelineActionRoleDefaultPolicy1EDCB5D0
                                      roles:
                                      - Ref: AymanPipelineCDKPipelineSourceCodeCommitCodePipelineActionRole71531ECD
                                    aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  EventsRole
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/EventsRole
                lib  :  aws-cdk-lib.aws_iam.Role
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/EventsRole/Resource
                    lib  :  aws-cdk-lib.aws_iam.CfnRole
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          assumeRolePolicyDocument:
                            Statement:
                            - Action: sts:AssumeRole
                              Effect: Allow
                              Principal:
                                Service: events.amazonaws.com
                            Version: '2012-10-17'
                        aws:cdk:cloudformation:type: AWS::IAM::Role
                    id   :  DefaultPolicy
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/EventsRole/DefaultPolicy
                    lib  :  aws-cdk-lib.aws_iam.Policy
                        id   :  Resource
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/EventsRole/DefaultPolicy/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              policyDocument:
                                Statement:
                                - Action: codepipeline:StartPipelineExecution
                                  Effect: Allow
                                  Resource:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':codepipeline:'
                                      - Ref: AWS::Region
                                      - ':'
                                      - Ref: AWS::AccountId
                                      - ':'
                                      - Ref: AymanPipelineCDKPipeline0DE64F82
                                Version: '2012-10-17'
                              policyName: AymanPipelineCDKPipelineEventsRoleDefaultPolicyAF702423
                              roles:
                              - Ref: AymanPipelineCDKPipelineEventsRole3AB2E8A7
                            aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  Build
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build
                lib  :  constructs.Construct
                    id   :  Synth
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth
                    lib  :  constructs.Construct
                        id   :  CdkBuildProject
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject
                        lib  :  aws-cdk-lib.aws_codebuild.PipelineProject
                            id   :  Role
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject/Role
                            lib  :  aws-cdk-lib.aws_iam.Role
                                id   :  Resource
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject/Role/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnRole
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      assumeRolePolicyDocument:
                                        Statement:
                                        - Action: sts:AssumeRole
                                          Effect: Allow
                                          Principal:
                                            Service: codebuild.amazonaws.com
                                        Version: '2012-10-17'
                                    aws:cdk:cloudformation:type: AWS::IAM::Role
                                id   :  DefaultPolicy
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy
                                lib  :  aws-cdk-lib.aws_iam.Policy
                                    id   :  Resource
                                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy/Resource
                                    lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                    attributes  :  
                                        aws:cdk:cloudformation:props:
                                          policyDocument:
                                            Statement:
                                            - Action:
                                              - logs:CreateLogGroup
                                              - logs:CreateLogStream
                                              - logs:PutLogEvents
                                              Effect: Allow
                                              Resource:
                                              - Fn::Join:
                                                - ''
                                                - - 'arn:'
                                                  - Ref: AWS::Partition
                                                  - ':logs:'
                                                  - Ref: AWS::Region
                                                  - ':'
                                                  - Ref: AWS::AccountId
                                                  - :log-group:/aws/codebuild/
                                                  - Ref: AymanPipelineCDKPipelineBuildSynthCdkBuildProject76B2FEE9
                                              - Fn::Join:
                                                - ''
                                                - - 'arn:'
                                                  - Ref: AWS::Partition
                                                  - ':logs:'
                                                  - Ref: AWS::Region
                                                  - ':'
                                                  - Ref: AWS::AccountId
                                                  - :log-group:/aws/codebuild/
                                                  - Ref: AymanPipelineCDKPipelineBuildSynthCdkBuildProject76B2FEE9
                                                  - :*
                                            - Action:
                                              - codebuild:CreateReportGroup
                                              - codebuild:CreateReport
                                              - codebuild:UpdateReport
                                              - codebuild:BatchPutTestCases
                                              - codebuild:BatchPutCodeCoverages
                                              Effect: Allow
                                              Resource:
                                                Fn::Join:
                                                - ''
                                                - - 'arn:'
                                                  - Ref: AWS::Partition
                                                  - ':codebuild:'
                                                  - Ref: AWS::Region
                                                  - ':'
                                                  - Ref: AWS::AccountId
                                                  - :report-group/
                                                  - Ref: AymanPipelineCDKPipelineBuildSynthCdkBuildProject76B2FEE9
                                                  - -*
                                            - Action:
                                              - s3:GetObject*
                                              - s3:GetBucket*
                                              - s3:List*
                                              - s3:DeleteObject*
                                              - s3:PutObject
                                              - s3:PutObjectLegalHold
                                              - s3:PutObjectRetention
                                              - s3:PutObjectTagging
                                              - s3:PutObjectVersionTagging
                                              - s3:Abort*
                                              Effect: Allow
                                              Resource:
                                              - Fn::GetAtt:
                                                - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                                - Arn
                                              - Fn::Join:
                                                - ''
                                                - - Fn::GetAtt:
                                                    - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                                    - Arn
                                                  - /*
                                            Version: '2012-10-17'
                                          policyName: AymanPipelineCDKPipelineBuildSynthCdkBuildProjectRoleDefaultPolicyED37CA00
                                          roles:
                                          - Ref: AymanPipelineCDKPipelineBuildSynthCdkBuildProjectRole83F3E5BA
                                        aws:cdk:cloudformation:type: AWS::IAM::Policy
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CdkBuildProject/Resource
                            lib  :  aws-cdk-lib.aws_codebuild.CfnProject
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  artifacts:
                                    type: CODEPIPELINE
                                  cache:
                                    type: NO_CACHE
                                  description: Pipeline step cdk-pipelines/Pipeline/Build/Synth
                                  encryptionKey: alias/aws/s3
                                  environment:
                                    computeType: BUILD_GENERAL1_SMALL
                                    image: aws/codebuild/standard:5.0
                                    imagePullCredentialsType: CODEBUILD
                                    privilegedMode: false
                                    type: LINUX_CONTAINER
                                  serviceRole:
                                    Fn::GetAtt:
                                    - AymanPipelineCDKPipelineBuildSynthCdkBuildProjectRole83F3E5BA
                                    - Arn
                                  source:
                                    buildSpec: "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n  \
                                      \    \"commands\": [\n        \"npm install -g aws-cdk\",\n        \"pip install\
                                      \ -r requirements.txt\",\n        \"npx cdk synth\"\n      ]\n    }\n  },\n\
                                      \  \"artifacts\": {\n    \"base-directory\": \"cdk.out\",\n    \"files\": \"\
                                      **/*\"\n  }\n}"
                                    type: CODEPIPELINE
                                aws:cdk:cloudformation:type: AWS::CodeBuild::Project
                        id   :  CodePipelineActionRole
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CodePipelineActionRole
                        lib  :  aws-cdk-lib.aws_iam.Role
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CodePipelineActionRole/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnRole
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  assumeRolePolicyDocument:
                                    Statement:
                                    - Action: sts:AssumeRole
                                      Effect: Allow
                                      Principal:
                                        AWS:
                                          Fn::Join:
                                          - ''
                                          - - 'arn:'
                                            - Ref: AWS::Partition
                                            - ':iam::'
                                            - Ref: AWS::AccountId
                                            - :root
                                    Version: '2012-10-17'
                                aws:cdk:cloudformation:type: AWS::IAM::Role
                            id   :  DefaultPolicy
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CodePipelineActionRole/DefaultPolicy
                            lib  :  aws-cdk-lib.aws_iam.Policy
                                id   :  Resource
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Build/Synth/CodePipelineActionRole/DefaultPolicy/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      policyDocument:
                                        Statement:
                                        - Action:
                                          - codebuild:BatchGetBuilds
                                          - codebuild:StartBuild
                                          - codebuild:StopBuild
                                          Effect: Allow
                                          Resource:
                                            Fn::GetAtt:
                                            - AymanPipelineCDKPipelineBuildSynthCdkBuildProject76B2FEE9
                                            - Arn
                                        Version: '2012-10-17'
                                      policyName: AymanPipelineCDKPipelineBuildSynthCodePipelineActionRoleDefaultPolicy0864D741
                                      roles:
                                      - Ref: AymanPipelineCDKPipelineBuildSynthCodePipelineActionRoleA0ED16A3
                                    aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  UpdatePipeline
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline
                lib  :  constructs.Construct
                    id   :  SelfMutate
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline/SelfMutate
                    lib  :  constructs.Construct
                        id   :  CodePipelineActionRole
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline/SelfMutate/CodePipelineActionRole
                        lib  :  aws-cdk-lib.aws_iam.Role
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline/SelfMutate/CodePipelineActionRole/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnRole
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  assumeRolePolicyDocument:
                                    Statement:
                                    - Action: sts:AssumeRole
                                      Effect: Allow
                                      Principal:
                                        AWS:
                                          Fn::Join:
                                          - ''
                                          - - 'arn:'
                                            - Ref: AWS::Partition
                                            - ':iam::'
                                            - Ref: AWS::AccountId
                                            - :root
                                    Version: '2012-10-17'
                                aws:cdk:cloudformation:type: AWS::IAM::Role
                            id   :  DefaultPolicy
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline/SelfMutate/CodePipelineActionRole/DefaultPolicy
                            lib  :  aws-cdk-lib.aws_iam.Policy
                                id   :  Resource
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/UpdatePipeline/SelfMutate/CodePipelineActionRole/DefaultPolicy/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      policyDocument:
                                        Statement:
                                        - Action:
                                          - codebuild:BatchGetBuilds
                                          - codebuild:StartBuild
                                          - codebuild:StopBuild
                                          Effect: Allow
                                          Resource:
                                            Fn::GetAtt:
                                            - AymanPipelineCDKUpdatePipelineSelfMutationE9EEF70F
                                            - Arn
                                        Version: '2012-10-17'
                                      policyName: AymanPipelineCDKPipelineUpdatePipelineSelfMutateCodePipelineActionRoleDefaultPolicy0A81D4FF
                                      roles:
                                      - Ref: AymanPipelineCDKPipelineUpdatePipelineSelfMutateCodePipelineActionRoleFC0A9D33
                                    aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  Assets
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets
                lib  :  constructs.Construct
                    id   :  FileAsset1
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets/FileAsset1
                    lib  :  constructs.Construct
                        id   :  CodePipelineActionRole
                        path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets/FileAsset1/CodePipelineActionRole
                        lib  :  aws-cdk-lib.aws_iam.Role
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets/FileAsset1/CodePipelineActionRole/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnRole
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  assumeRolePolicyDocument:
                                    Statement:
                                    - Action: sts:AssumeRole
                                      Effect: Allow
                                      Principal:
                                        AWS:
                                          Fn::Join:
                                          - ''
                                          - - 'arn:'
                                            - Ref: AWS::Partition
                                            - ':iam::'
                                            - Ref: AWS::AccountId
                                            - :root
                                    Version: '2012-10-17'
                                aws:cdk:cloudformation:type: AWS::IAM::Role
                            id   :  DefaultPolicy
                            path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets/FileAsset1/CodePipelineActionRole/DefaultPolicy
                            lib  :  aws-cdk-lib.aws_iam.Policy
                                id   :  Resource
                                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Assets/FileAsset1/CodePipelineActionRole/DefaultPolicy/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      policyDocument:
                                        Statement:
                                        - Action:
                                          - codebuild:BatchGetBuilds
                                          - codebuild:StartBuild
                                          - codebuild:StopBuild
                                          Effect: Allow
                                          Resource:
                                            Fn::GetAtt:
                                            - AymanPipelineCDKAssetsFileAsset1CA9ECF9C
                                            - Arn
                                        Version: '2012-10-17'
                                      policyName: AymanPipelineCDKPipelineAssetsFileAsset1CodePipelineActionRoleDefaultPolicy6136466F
                                      roles:
                                      - Ref: AymanPipelineCDKPipelineAssetsFileAsset1CodePipelineActionRole614D4BF0
                                    aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  Deploy
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Deploy
                lib  :  constructs.Construct
                    id   :  Prepare
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Deploy/Prepare
                    lib  :  constructs.Construct
                    id   :  Deploy
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/Deploy/Deploy
                    lib  :  constructs.Construct
                id   :  arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}
                lib  :  aws-cdk-lib.Resource
                id   :  ImmutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ImmutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}
                lib  :  aws-cdk-lib.Resource
                    id   :  8389e75f-0810-4838-bf64-d6f85a95cf83
                    path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ImmutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-deploy-role-${AWS::AccountId}-${AWS::Region}/8389e75f-0810-4838-bf64-d6f85a95cf83
                    lib  :  constructs.Construct
                id   :  arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/arn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}
                lib  :  aws-cdk-lib.Resource
                id   :  ImmutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}
                path :  cdk-pipelines/AymanPipelineCDK/Pipeline/ImmutableRolearn:${AWS::Partition}:iam::${AWS::AccountId}:role--cdk-hnb659fds-cfn-exec-role-${AWS::AccountId}-${AWS::Region}
                lib  :  aws-cdk-lib.Resource
            id   :  UpdatePipeline
            path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline
            lib  :  constructs.Construct
                id   :  SelfMutation
                path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation
                lib  :  aws-cdk-lib.aws_codebuild.PipelineProject
                    id   :  Role
                    path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation/Role
                    lib  :  aws-cdk-lib.aws_iam.Role
                        id   :  Resource
                        path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation/Role/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnRole
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              assumeRolePolicyDocument:
                                Statement:
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Principal:
                                    Service: codebuild.amazonaws.com
                                Version: '2012-10-17'
                            aws:cdk:cloudformation:type: AWS::IAM::Role
                        id   :  DefaultPolicy
                        path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation/Role/DefaultPolicy
                        lib  :  aws-cdk-lib.aws_iam.Policy
                            id   :  Resource
                            path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation/Role/DefaultPolicy/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  policyDocument:
                                    Statement:
                                    - Action:
                                      - logs:CreateLogGroup
                                      - logs:CreateLogStream
                                      - logs:PutLogEvents
                                      Effect: Allow
                                      Resource:
                                      - Fn::Join:
                                        - ''
                                        - - 'arn:'
                                          - Ref: AWS::Partition
                                          - ':logs:'
                                          - Ref: AWS::Region
                                          - ':'
                                          - Ref: AWS::AccountId
                                          - :log-group:/aws/codebuild/
                                          - Ref: AymanPipelineCDKUpdatePipelineSelfMutationE9EEF70F
                                      - Fn::Join:
                                        - ''
                                        - - 'arn:'
                                          - Ref: AWS::Partition
                                          - ':logs:'
                                          - Ref: AWS::Region
                                          - ':'
                                          - Ref: AWS::AccountId
                                          - :log-group:/aws/codebuild/
                                          - Ref: AymanPipelineCDKUpdatePipelineSelfMutationE9EEF70F
                                          - :*
                                    - Action:
                                      - codebuild:CreateReportGroup
                                      - codebuild:CreateReport
                                      - codebuild:UpdateReport
                                      - codebuild:BatchPutTestCases
                                      - codebuild:BatchPutCodeCoverages
                                      Effect: Allow
                                      Resource:
                                        Fn::Join:
                                        - ''
                                        - - 'arn:'
                                          - Ref: AWS::Partition
                                          - ':codebuild:'
                                          - Ref: AWS::Region
                                          - ':'
                                          - Ref: AWS::AccountId
                                          - :report-group/
                                          - Ref: AymanPipelineCDKUpdatePipelineSelfMutationE9EEF70F
                                          - -*
                                    - Action: sts:AssumeRole
                                      Condition:
                                        ForAnyValue:StringEquals:
                                          iam:ResourceTag/aws-cdk:bootstrap-role:
                                          - image-publishing
                                          - file-publishing
                                          - deploy
                                      Effect: Allow
                                      Resource:
                                        Fn::Join:
                                        - ''
                                        - - 'arn:*:iam::'
                                          - Ref: AWS::AccountId
                                          - :role/*
                                    - Action: cloudformation:DescribeStacks
                                      Effect: Allow
                                      Resource: '*'
                                    - Action: s3:ListBucket
                                      Effect: Allow
                                      Resource: '*'
                                    - Action:
                                      - s3:GetObject*
                                      - s3:GetBucket*
                                      - s3:List*
                                      Effect: Allow
                                      Resource:
                                      - Fn::GetAtt:
                                        - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                        - Arn
                                      - Fn::Join:
                                        - ''
                                        - - Fn::GetAtt:
                                            - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                            - Arn
                                          - /*
                                    Version: '2012-10-17'
                                  policyName: AymanPipelineCDKUpdatePipelineSelfMutationRoleDefaultPolicy317C696B
                                  roles:
                                  - Ref: AymanPipelineCDKUpdatePipelineSelfMutationRole936D12D0
                                aws:cdk:cloudformation:type: AWS::IAM::Policy
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/UpdatePipeline/SelfMutation/Resource
                    lib  :  aws-cdk-lib.aws_codebuild.CfnProject
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          artifacts:
                            type: CODEPIPELINE
                          cache:
                            type: NO_CACHE
                          description: Pipeline step cdk-pipelines/Pipeline/UpdatePipeline/SelfMutate
                          encryptionKey: alias/aws/s3
                          environment:
                            computeType: BUILD_GENERAL1_SMALL
                            image: aws/codebuild/standard:5.0
                            imagePullCredentialsType: CODEBUILD
                            privilegedMode: false
                            type: LINUX_CONTAINER
                          serviceRole:
                            Fn::GetAtt:
                            - AymanPipelineCDKUpdatePipelineSelfMutationRole936D12D0
                            - Arn
                          source:
                            buildSpec: "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n\
                              \      \"commands\": [\n        \"npm install -g aws-cdk@2\"\n      ]\n    },\n\
                              \    \"build\": {\n      \"commands\": [\n        \"cdk -a . deploy cdk-pipelines\
                              \ --require-approval=never --verbose\"\n      ]\n    }\n  }\n}"
                            type: CODEPIPELINE
                        aws:cdk:cloudformation:type: AWS::CodeBuild::Project
            id   :  Assets
            path :  cdk-pipelines/AymanPipelineCDK/Assets
            lib  :  constructs.Construct
                id   :  FileRole
                path :  cdk-pipelines/AymanPipelineCDK/Assets/FileRole
                lib  :  aws-cdk-lib.aws_iam.Role
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/Assets/FileRole/Resource
                    lib  :  aws-cdk-lib.aws_iam.CfnRole
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          assumeRolePolicyDocument:
                            Statement:
                            - Action: sts:AssumeRole
                              Effect: Allow
                              Principal:
                                Service: codebuild.amazonaws.com
                            - Action: sts:AssumeRole
                              Effect: Allow
                              Principal:
                                AWS:
                                  Fn::Join:
                                  - ''
                                  - - 'arn:'
                                    - Ref: AWS::Partition
                                    - ':iam::'
                                    - Ref: AWS::AccountId
                                    - :root
                            Version: '2012-10-17'
                        aws:cdk:cloudformation:type: AWS::IAM::Role
                    id   :  DefaultPolicy
                    path :  cdk-pipelines/AymanPipelineCDK/Assets/FileRole/DefaultPolicy
                    lib  :  aws-cdk-lib.aws_iam.Policy
                        id   :  Resource
                        path :  cdk-pipelines/AymanPipelineCDK/Assets/FileRole/DefaultPolicy/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              policyDocument:
                                Statement:
                                - Action:
                                  - logs:CreateLogGroup
                                  - logs:CreateLogStream
                                  - logs:PutLogEvents
                                  Effect: Allow
                                  Resource:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':logs:'
                                      - Ref: AWS::Region
                                      - ':'
                                      - Ref: AWS::AccountId
                                      - :log-group:/aws/codebuild/*
                                - Action:
                                  - codebuild:CreateReportGroup
                                  - codebuild:CreateReport
                                  - codebuild:UpdateReport
                                  - codebuild:BatchPutTestCases
                                  - codebuild:BatchPutCodeCoverages
                                  Effect: Allow
                                  Resource:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':codebuild:'
                                      - Ref: AWS::Region
                                      - ':'
                                      - Ref: AWS::AccountId
                                      - :report-group/*
                                - Action:
                                  - codebuild:BatchGetBuilds
                                  - codebuild:StartBuild
                                  - codebuild:StopBuild
                                  Effect: Allow
                                  Resource: '*'
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Resource:
                                  - Fn::Sub: arn:${AWS::Partition}:iam::${AWS::AccountId}:role/cdk-hnb659fds-file-publishing-role-${AWS::AccountId}-${AWS::Region}
                                - Action:
                                  - s3:GetObject*
                                  - s3:GetBucket*
                                  - s3:List*
                                  Effect: Allow
                                  Resource:
                                  - Fn::GetAtt:
                                    - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                    - Arn
                                  - Fn::Join:
                                    - ''
                                    - - Fn::GetAtt:
                                        - AymanPipelineCDKPipelineArtifactsBucket33E4858D
                                        - Arn
                                      - /*
                                Version: '2012-10-17'
                              policyName: AymanPipelineCDKAssetsFileRoleDefaultPolicy710A3E28
                              roles:
                              - Ref: AymanPipelineCDKAssetsFileRoleFC9D3E13
                            aws:cdk:cloudformation:type: AWS::IAM::Policy
                id   :  FileAsset1
                path :  cdk-pipelines/AymanPipelineCDK/Assets/FileAsset1
                lib  :  aws-cdk-lib.aws_codebuild.PipelineProject
                    id   :  Resource
                    path :  cdk-pipelines/AymanPipelineCDK/Assets/FileAsset1/Resource
                    lib  :  aws-cdk-lib.aws_codebuild.CfnProject
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          artifacts:
                            type: CODEPIPELINE
                          cache:
                            type: NO_CACHE
                          description: Pipeline step cdk-pipelines/Pipeline/Assets/FileAsset1
                          encryptionKey: alias/aws/s3
                          environment:
                            computeType: BUILD_GENERAL1_SMALL
                            image: aws/codebuild/standard:5.0
                            imagePullCredentialsType: CODEBUILD
                            privilegedMode: false
                            type: LINUX_CONTAINER
                          serviceRole:
                            Fn::GetAtt:
                            - AymanPipelineCDKAssetsFileRoleFC9D3E13
                            - Arn
                          source:
                            buildSpec: "{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n\
                              \      \"commands\": [\n        \"npm install -g cdk-assets@2\"\n      ]\n \
                              \   },\n    \"build\": {\n      \"commands\": [\n        \"cdk-assets --path\
                              \ \\\"assembly-cdk-pipelines-Deploy/cdkpipelinesDeployServerlessApp594FF085.assets.json\\\
                              \" --verbose publish \\\"73437e994938655a628c0b314e796d4f356731c05b6f84dc660eb24ef09fd4f2:current_account-current_region\\\
                              \"\"\n      ]\n    }\n  }\n}"
                            type: CODEPIPELINE
                        aws:cdk:cloudformation:type: AWS::CodeBuild::Project
        id   :  Deploy
        path :  cdk-pipelines/Deploy
        lib  :  aws-cdk-lib.Stage
            id   :  ServerlessApp
            path :  cdk-pipelines/Deploy/ServerlessApp
            lib  :  aws-cdk-lib.Stack
                id   :  HelloHandler
                path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler
                lib  :  aws-cdk-lib.aws_lambda.Function
                    id   :  ServiceRole
                    path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/ServiceRole
                    lib  :  aws-cdk-lib.aws_iam.Role
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/ServiceRole/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnRole
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              assumeRolePolicyDocument:
                                Statement:
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Principal:
                                    Service: lambda.amazonaws.com
                                Version: '2012-10-17'
                              managedPolicyArns:
                              - Fn::Join:
                                - ''
                                - - 'arn:'
                                  - Ref: AWS::Partition
                                  - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
                            aws:cdk:cloudformation:type: AWS::IAM::Role
                    id   :  Code
                    path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/Code
                    lib  :  aws-cdk-lib.aws_s3_assets.Asset
                        id   :  Stage
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/Code/Stage
                        lib  :  aws-cdk-lib.AssetStaging
                        id   :  AssetBucket
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/Code/AssetBucket
                        lib  :  aws-cdk-lib.aws_s3.BucketBase
                    id   :  Resource
                    path :  cdk-pipelines/Deploy/ServerlessApp/HelloHandler/Resource
                    lib  :  aws-cdk-lib.aws_lambda.CfnFunction
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          code:
                            s3Bucket:
                              Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}
                            s3Key: 73437e994938655a628c0b314e796d4f356731c05b6f84dc660eb24ef09fd4f2.zip
                          handler: hello.handler
                          role:
                            Fn::GetAtt:
                            - HelloHandlerServiceRole11EF7C63
                            - Arn
                          runtime: python3.7
                        aws:cdk:cloudformation:type: AWS::Lambda::Function
                id   :  HelloHitCounter
                path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter
                lib  :  constructs.Construct
                    id   :  Hits
                    path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/Hits
                    lib  :  aws-cdk-lib.aws_dynamodb.Table
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/Hits/Resource
                        lib  :  aws-cdk-lib.aws_dynamodb.CfnTable
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              attributeDefinitions:
                              - attributeName: path
                                attributeType: S
                              keySchema:
                              - attributeName: path
                                keyType: HASH
                              provisionedThroughput:
                                readCapacityUnits: 5
                                writeCapacityUnits: 5
                            aws:cdk:cloudformation:type: AWS::DynamoDB::Table
                        id   :  ScalingRole
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/Hits/ScalingRole
                        lib  :  aws-cdk-lib.Resource
                    id   :  HitCountHandler
                    path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler
                    lib  :  aws-cdk-lib.aws_lambda.Function
                        id   :  ServiceRole
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/ServiceRole
                        lib  :  aws-cdk-lib.aws_iam.Role
                            id   :  Resource
                            path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/ServiceRole/Resource
                            lib  :  aws-cdk-lib.aws_iam.CfnRole
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  assumeRolePolicyDocument:
                                    Statement:
                                    - Action: sts:AssumeRole
                                      Effect: Allow
                                      Principal:
                                        Service: lambda.amazonaws.com
                                    Version: '2012-10-17'
                                  managedPolicyArns:
                                  - Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
                                aws:cdk:cloudformation:type: AWS::IAM::Role
                            id   :  DefaultPolicy
                            path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/ServiceRole/DefaultPolicy
                            lib  :  aws-cdk-lib.aws_iam.Policy
                                id   :  Resource
                                path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/ServiceRole/DefaultPolicy/Resource
                                lib  :  aws-cdk-lib.aws_iam.CfnPolicy
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      policyDocument:
                                        Statement:
                                        - Action:
                                          - dynamodb:BatchGetItem
                                          - dynamodb:GetRecords
                                          - dynamodb:GetShardIterator
                                          - dynamodb:Query
                                          - dynamodb:GetItem
                                          - dynamodb:Scan
                                          - dynamodb:ConditionCheckItem
                                          - dynamodb:BatchWriteItem
                                          - dynamodb:PutItem
                                          - dynamodb:UpdateItem
                                          - dynamodb:DeleteItem
                                          - dynamodb:DescribeTable
                                          Effect: Allow
                                          Resource:
                                          - Fn::GetAtt:
                                            - HelloHitCounterHits7AAEBF80
                                            - Arn
                                          - Ref: AWS::NoValue
                                        - Action: lambda:InvokeFunction
                                          Effect: Allow
                                          Resource:
                                            Fn::GetAtt:
                                            - HelloHandler2E4FBA4D
                                            - Arn
                                        Version: '2012-10-17'
                                      policyName: HelloHitCounterHitCountHandlerServiceRoleDefaultPolicy0295D032
                                      roles:
                                      - Ref: HelloHitCounterHitCountHandlerServiceRole42AAF829
                                    aws:cdk:cloudformation:type: AWS::IAM::Policy
                        id   :  Code
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/Code
                        lib  :  aws-cdk-lib.aws_s3_assets.Asset
                            id   :  Stage
                            path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/Code/Stage
                            lib  :  aws-cdk-lib.AssetStaging
                            id   :  AssetBucket
                            path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/Code/AssetBucket
                            lib  :  aws-cdk-lib.aws_s3.BucketBase
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/HelloHitCounter/HitCountHandler/Resource
                        lib  :  aws-cdk-lib.aws_lambda.CfnFunction
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              code:
                                s3Bucket:
                                  Fn::Sub: cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}
                                s3Key: 73437e994938655a628c0b314e796d4f356731c05b6f84dc660eb24ef09fd4f2.zip
                              environment:
                                variables:
                                  DOWNSTREAM_FUNCTION_NAME:
                                    Ref: HelloHandler2E4FBA4D
                                  HITS_TABLE_NAME:
                                    Ref: HelloHitCounterHits7AAEBF80
                              handler: hitcount.handler
                              role:
                                Fn::GetAtt:
                                - HelloHitCounterHitCountHandlerServiceRole42AAF829
                                - Arn
                              runtime: python3.7
                            aws:cdk:cloudformation:type: AWS::Lambda::Function
                id   :  Endpoint
                path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint
                lib  :  aws-cdk-lib.aws_apigateway.LambdaRestApi
                    id   :  Resource
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Resource
                    lib  :  aws-cdk-lib.aws_apigateway.CfnRestApi
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          name: Endpoint
                        aws:cdk:cloudformation:type: AWS::ApiGateway::RestApi
                    id   :  CloudWatchRole
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/CloudWatchRole
                    lib  :  aws-cdk-lib.aws_iam.Role
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/CloudWatchRole/Resource
                        lib  :  aws-cdk-lib.aws_iam.CfnRole
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              assumeRolePolicyDocument:
                                Statement:
                                - Action: sts:AssumeRole
                                  Effect: Allow
                                  Principal:
                                    Service: apigateway.amazonaws.com
                                Version: '2012-10-17'
                              managedPolicyArns:
                              - Fn::Join:
                                - ''
                                - - 'arn:'
                                  - Ref: AWS::Partition
                                  - :iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs
                            aws:cdk:cloudformation:type: AWS::IAM::Role
                    id   :  Account
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Account
                    lib  :  aws-cdk-lib.aws_apigateway.CfnAccount
                    attributes  :  
                        aws:cdk:cloudformation:props:
                          cloudWatchRoleArn:
                            Fn::GetAtt:
                            - EndpointCloudWatchRoleC3C64E0F
                            - Arn
                        aws:cdk:cloudformation:type: AWS::ApiGateway::Account
                    id   :  Deployment
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Deployment
                    lib  :  aws-cdk-lib.aws_apigateway.Deployment
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Deployment/Resource
                        lib  :  aws-cdk-lib.aws_apigateway.CfnDeployment
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              description: Automatically created by the RestApi construct
                              restApiId:
                                Ref: EndpointEEF1FD8F
                            aws:cdk:cloudformation:type: AWS::ApiGateway::Deployment
                    id   :  DeploymentStage.prod
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/DeploymentStage.prod
                    lib  :  aws-cdk-lib.aws_apigateway.Stage
                        id   :  Resource
                        path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/DeploymentStage.prod/Resource
                        lib  :  aws-cdk-lib.aws_apigateway.CfnStage
                        attributes  :  
                            aws:cdk:cloudformation:props:
                              deploymentId:
                                Ref: EndpointDeployment318525DA9f9f0da313b8d43e3e94ad93d6b3b5cb
                              restApiId:
                                Ref: EndpointEEF1FD8F
                              stageName: prod
                            aws:cdk:cloudformation:type: AWS::ApiGateway::Stage
                    id   :  Endpoint
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Endpoint
                    lib  :  aws-cdk-lib.CfnOutput
                    id   :  Default
                    path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default
                    lib  :  aws-cdk-lib.aws_apigateway.ResourceBase
                        id   :  {proxy+}
                        path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}
                        lib  :  aws-cdk-lib.aws_apigateway.ProxyResource
                            id   :  Resource
                            path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}/Resource
                            lib  :  aws-cdk-lib.aws_apigateway.CfnResource
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  parentId:
                                    Fn::GetAtt:
                                    - EndpointEEF1FD8F
                                    - RootResourceId
                                  pathPart: '{proxy+}'
                                  restApiId:
                                    Ref: EndpointEEF1FD8F
                                aws:cdk:cloudformation:type: AWS::ApiGateway::Resource
                            id   :  ANY
                            path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}/ANY
                            lib  :  aws-cdk-lib.aws_apigateway.Method
                                id   :  ApiPermission.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..{proxy+}
                                path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}/ANY/ApiPermission.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..{proxy+}
                                lib  :  aws-cdk-lib.aws_lambda.CfnPermission
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      action: lambda:InvokeFunction
                                      functionName:
                                        Fn::GetAtt:
                                        - HelloHitCounterHitCountHandler2475EAC2
                                        - Arn
                                      principal: apigateway.amazonaws.com
                                      sourceArn:
                                        Fn::Join:
                                        - ''
                                        - - 'arn:'
                                          - Ref: AWS::Partition
                                          - ':execute-api:'
                                          - Ref: AWS::Region
                                          - ':'
                                          - Ref: AWS::AccountId
                                          - ':'
                                          - Ref: EndpointEEF1FD8F
                                          - /
                                          - Ref: EndpointDeploymentStageprodB78BEEA0
                                          - /*/*
                                    aws:cdk:cloudformation:type: AWS::Lambda::Permission
                                id   :  ApiPermission.Test.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..{proxy+}
                                path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}/ANY/ApiPermission.Test.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..{proxy+}
                                lib  :  aws-cdk-lib.aws_lambda.CfnPermission
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      action: lambda:InvokeFunction
                                      functionName:
                                        Fn::GetAtt:
                                        - HelloHitCounterHitCountHandler2475EAC2
                                        - Arn
                                      principal: apigateway.amazonaws.com
                                      sourceArn:
                                        Fn::Join:
                                        - ''
                                        - - 'arn:'
                                          - Ref: AWS::Partition
                                          - ':execute-api:'
                                          - Ref: AWS::Region
                                          - ':'
                                          - Ref: AWS::AccountId
                                          - ':'
                                          - Ref: EndpointEEF1FD8F
                                          - /test-invoke-stage/*/*
                                    aws:cdk:cloudformation:type: AWS::Lambda::Permission
                                id   :  Resource
                                path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/{proxy+}/ANY/Resource
                                lib  :  aws-cdk-lib.aws_apigateway.CfnMethod
                                attributes  :  
                                    aws:cdk:cloudformation:props:
                                      authorizationType: NONE
                                      httpMethod: ANY
                                      integration:
                                        integrationHttpMethod: POST
                                        type: AWS_PROXY
                                        uri:
                                          Fn::Join:
                                          - ''
                                          - - 'arn:'
                                            - Ref: AWS::Partition
                                            - ':apigateway:'
                                            - Ref: AWS::Region
                                            - :lambda:path/2015-03-31/functions/
                                            - Fn::GetAtt:
                                              - HelloHitCounterHitCountHandler2475EAC2
                                              - Arn
                                            - /invocations
                                      resourceId:
                                        Ref: Endpointproxy39E2174E
                                      restApiId:
                                        Ref: EndpointEEF1FD8F
                                    aws:cdk:cloudformation:type: AWS::ApiGateway::Method
                        id   :  ANY
                        path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/ANY
                        lib  :  aws-cdk-lib.aws_apigateway.Method
                            id   :  ApiPermission.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..
                            path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/ANY/ApiPermission.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..
                            lib  :  aws-cdk-lib.aws_lambda.CfnPermission
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  action: lambda:InvokeFunction
                                  functionName:
                                    Fn::GetAtt:
                                    - HelloHitCounterHitCountHandler2475EAC2
                                    - Arn
                                  principal: apigateway.amazonaws.com
                                  sourceArn:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':execute-api:'
                                      - Ref: AWS::Region
                                      - ':'
                                      - Ref: AWS::AccountId
                                      - ':'
                                      - Ref: EndpointEEF1FD8F
                                      - /
                                      - Ref: EndpointDeploymentStageprodB78BEEA0
                                      - /*/
                                aws:cdk:cloudformation:type: AWS::Lambda::Permission
                            id   :  ApiPermission.Test.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..
                            path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/ANY/ApiPermission.Test.cdkpipelinesDeployServerlessAppEndpoint7E163051.ANY..
                            lib  :  aws-cdk-lib.aws_lambda.CfnPermission
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  action: lambda:InvokeFunction
                                  functionName:
                                    Fn::GetAtt:
                                    - HelloHitCounterHitCountHandler2475EAC2
                                    - Arn
                                  principal: apigateway.amazonaws.com
                                  sourceArn:
                                    Fn::Join:
                                    - ''
                                    - - 'arn:'
                                      - Ref: AWS::Partition
                                      - ':execute-api:'
                                      - Ref: AWS::Region
                                      - ':'
                                      - Ref: AWS::AccountId
                                      - ':'
                                      - Ref: EndpointEEF1FD8F
                                      - /test-invoke-stage/*/
                                aws:cdk:cloudformation:type: AWS::Lambda::Permission
                            id   :  Resource
                            path :  cdk-pipelines/Deploy/ServerlessApp/Endpoint/Default/ANY/Resource
                            lib  :  aws-cdk-lib.aws_apigateway.CfnMethod
                            attributes  :  
                                aws:cdk:cloudformation:props:
                                  authorizationType: NONE
                                  httpMethod: ANY
                                  integration:
                                    integrationHttpMethod: POST
                                    type: AWS_PROXY
                                    uri:
                                      Fn::Join:
                                      - ''
                                      - - 'arn:'
                                        - Ref: AWS::Partition
                                        - ':apigateway:'
                                        - Ref: AWS::Region
                                        - :lambda:path/2015-03-31/functions/
                                        - Fn::GetAtt:
                                          - HelloHitCounterHitCountHandler2475EAC2
                                          - Arn
                                        - /invocations
                                  resourceId:
                                    Fn::GetAtt:
                                    - EndpointEEF1FD8F
                                    - RootResourceId
                                  restApiId:
                                    Ref: EndpointEEF1FD8F
                                aws:cdk:cloudformation:type: AWS::ApiGateway::Method
                id   :  CDKMetadata
                path :  cdk-pipelines/Deploy/ServerlessApp/CDKMetadata
                lib  :  constructs.Construct
                    id   :  Default
                    path :  cdk-pipelines/Deploy/ServerlessApp/CDKMetadata/Default
                    lib  :  aws-cdk-lib.CfnResource
                    id   :  Condition
                    path :  cdk-pipelines/Deploy/ServerlessApp/CDKMetadata/Condition
                    lib  :  aws-cdk-lib.CfnCondition
                id   :  BootstrapVersion
                path :  cdk-pipelines/Deploy/ServerlessApp/BootstrapVersion
                lib  :  aws-cdk-lib.CfnParameter
                id   :  CheckBootstrapVersion
                path :  cdk-pipelines/Deploy/ServerlessApp/CheckBootstrapVersion
                lib  :  aws-cdk-lib.CfnRule
        id   :  CDKMetadata
        path :  cdk-pipelines/CDKMetadata
        lib  :  constructs.Construct
            id   :  Default
            path :  cdk-pipelines/CDKMetadata/Default
            lib  :  aws-cdk-lib.CfnResource
            id   :  Condition
            path :  cdk-pipelines/CDKMetadata/Condition
            lib  :  aws-cdk-lib.CfnCondition
